/*! siteBase */
function ajusterAccessibiliteLiens(){$("main").find('a[target="_blank"]').each(function(){var n=$(this),t;n.attr("href")&&(n.attr("href").endsWith(".pdf")||n.hasClass("sans-lien-externe")||(n.hasClass("lien-externe")||n.find(".lien-externe").length||n.addClass("lien-externe"),n.find(".sr-only").length===0&&(t=obtenirTexteEdite("txtcacheCommunOuvertureLienNouvelOnglet"),n.append('<span class="sr-only">{0}<\/span>'.format(t)))))})}function definirTrappeErreurGlboale(){window.onerror=function(n,t,i,r,u){var f="",e;return u?(e=u.stack,f=u.toString(),e&&(f+="\n"+e)):f="Message : "+n+"\nLigne : "+i+"\nColonne : "+r,journaliserErreurJs(f),!1};window.addEventListener("unhandledrejection",function(n){journaliserErreurJs(n.reason.stack)})}function journaliserErreurJs(n){executerRequeteAjax("/api/log/error",{message:n})}function journaliserInformationJs(n){executerRequeteAjax("/api/log/information",{message:n})}function definirHauteurAutomatiqueIFrame(){window.addEventListener&&window.addEventListener("message",function(n){var t=$("iframe.autoheight"),i=n.data[0],r=n.data[1];switch(i){case"setHeight":t.height(r)}},!1)}function ajouterRetourHautPage(){$("#flecheHaut").length&&$(window).scroll(function(){retourHautPage()});$("#flecheHaut").on("click",function(){$("html, body").stop().animate({scrollTop:0},ecs.hauteurMinimaleSroll,"swing",function(){})})}function retourHautPage(){document.body.scrollTop>ecs.hauteurMinimaleSroll||document.documentElement.scrollTop>ecs.hauteurMinimaleSroll?$("#flecheHaut").fadeIn():$("#flecheHaut").fadeOut()}function confirmationDechargementPage(n,t){window.onbeforeunload=function(i){if(n!=$(t).serialize()){var r=obtenirTexteEdite("texteCommunChangementsPerdus");return typeof i=="undefined"&&(i=window.event),i&&(i.returnValue=r),r}}}function definirGestionDelaiInactivite(n,t){var r,u,i=$.Deferred(function(){r&&clearTimeout(r);u&&clearTimeout(u);r=setTimeout(function(){var n={type:"avertissement",titre:obtenirTexteEdite("titreGabaritDelaiInactivitePopUpConfirmation"),corps:obtenirTexteEdite("texteGabaritDelaiInactivitePopUpConfirmation"),texteBoutonPrimaire:obtenirTexteEdite("boutonGabaritDelaiInactivitePopUpConfQuitter"),texteBoutonSecondaire:obtenirTexteEdite("boutonGabaritDelaiInactivitePopUpConfRester"),forcerBoutons:!0,afficherBoutonFermer:!1};afficherMessage(n).done(function(n){n.primaire?i.resolve():n.secondaire&&i.reject()})},n*6e4);u=setTimeout(function(){i.reject()},t*6e4)}),f=i.promise();f.done(function(){definirGestionDelaiInactivite(n,t)}).fail(function(){window.onbeforeunload=function(){};window.location.href=definirLienMultilingue("/Authentification/Deconnexion")})}function executerRequeteAjaxBase(n,t){return t=t||{},$.ajax({type:"POST",url:n,beforeSend:function(n){n.setRequestHeader("XSRF-TOKEN",$('input:hidden[name="__RequestVerificationToken"]:first').val())},data:t})}function executerRequeteAjaxBaseGet(n,t,i){return t=t||{},i=i!==!1,$.ajax({type:"GET",url:n,beforeSend:function(n){i?n.setRequestHeader("session_id",SESSION_ID):n.setRequestHeader("cache-control","no-cache")},data:t})}function executerRequeteAjaxGet(n,t,i,r){return executerRequeteAjax(n,t,i,"GET",r)}function executerRequeteAjax(n,t,i,r,u){r=r||"POST";u=u!==!1;var f=$.Deferred(function(){var e,o;t=t||{};i&&i.find(".traitement-en-cours").length==0&&(afficherChargementEnCours(i),document.activeElement&&$(document.activeElement).is("button, input[type=submit]")&&(e=i.find(".traitement-en-cours"),e.focus(),e.get(0).scrollIntoView(),window.scrollBy(0,-48)));switch(r){case"POST":o=executerRequeteAjaxBase;break;case"GET":o=executerRequeteAjaxBaseGet;break;default:alert("Méthode "+r+" non gérée.")}o(n,t,u).done(function(n){if(n&&n.resultat&&n.resultat==="redirection"&&n.url)window.location.href=n.url,f.resolve(n);else if(i){var t=document.activeElement&&$(document.activeElement).is(".traitement-en-cours");i.fadeTo(50,.2,function(){i.html(n);f.resolve(n);i.fadeTo(350,1,function(){if(t){var n=obtenirElementsFocusables(i.get(0));n.length>0?n[0].focus():i.focus()}})})}else f.resolve(n)}).fail(function(n){if(i){var t=document.activeElement&&$(document.activeElement).is(".traitement-en-cours");i.fadeTo(50,.2,function(){i.html('<div class="info-non-disponible d-flex flex-column align-items-center" tabindex="0"><div aria-hidden="true" class="icone-svg averti lg"><\/div><div class="texte text-base">{0}<\/div><\/div>'.format(obtenirTexteEdite("messageCommunInformationNonDisponible")));f.reject(n);i.fadeTo(350,1,function(){if(t){var n=obtenirElementsFocusables(i.get(0));n.length>0?n[0].focus():i.focus()}})})}else f.reject(n)})});return f.promise()}function afficherChargementEnCours(n,t){var e={taille:"md",position:"text-center",afficherTexte:!1,texte:obtenirTexteEdite("texteCommunChargementEnCours"),overlay:!1,affichageDansBouton:!1},r,f,u,i;t=$.extend({},e,t);r='<div class="texte sr-only">{0}<\/div>'.format(t.texte);r=t.afficherTexte?r.replace("sr-only",""):r;f=t.overlay?"avec-overlay":"";u='<div class="traitement-en-cours {0} {1} {2}" tabindex="0" role="status"><svg class="spinner" viewBox="0 0 50 50" aria-hidden="true"><circle class="path" cx="25" cy="25" r="20" fill="none"><\/circle><\/svg>{3}<\/div>';u=u.format(f,t.taille,t.position,r);i=$(u);n.height()>0?(i.width(n.width()),i.height(n.height())):i.css("position","relative");n.html(i);i.css("opacity",1)}function afficherNotificationSuccesEnregistrement(n){n=n||obtenirTexteEdite("messageCommunSuccesEnregistrement");afficherNotification({message:n})}function afficherNotificationSuccesAnnulation(n){n=n||obtenirTexteEdite("messageCommunSuccesAnnulation");afficherNotification({type:"information",message:n})}function afficherNotificationEchecEnregistrement(n){n=n||"Une erreur est survenue lors de l'enregistrement.";afficherNotification({type:"echec",message:n})}function afficherMessageConfirmationAnnulationEdition(n){var t={type:"avertissement",titre:obtenirTexteEdite("messageCommunTitreConfirmationAnnulation"),corps:obtenirTexteEdite("messageCommunConfirmationAnnulation"),texteBoutonPrimaire:obtenirTexteEdite("boutonCommunAnnulerModification"),texteBoutonSecondaire:obtenirTexteEdite("boutonCommunPoursuivreEdition")};return n=$.extend({},t,n),afficherMessage(n)}function afficherMessageConfirmationSuppression(n){var t={type:"avertissement",titre:obtenirTexteEdite("messageCommunTitreConfirmationSuppression"),corps:obtenirTexteEdite("messageCommunConfirmationSuppression"),texteBoutonPrimaire:obtenirTexteEdite("boutonCommunSupprimer"),texteBoutonSecondaire:obtenirTexteEdite("boutonCommunAnnuler")};return n=$.extend({},t,n),afficherMessage(n)}function afficherMessageErreur(n){var t={type:"erreur",titre:obtenirTexteEdite("messageCommunTitreErreur"),corps:obtenirTexteEdite("messageCommunErreur"),texteBoutonPrimaire:obtenirTexteEdite("boutonCommunFermer")};return n=$.extend({},t,n),afficherMessage(n)}function afficherMessageErreurTest(n){var t=n.readySate,i;return t+="; "+n.getAllResponseHeaders(),t+="; "+n.statusCode,t+="; "+n.state,t+="; "+n.responseText,t+="; "+n.status,t+="; "+n.statusText,i={type:"erreur",titre:"AffichageErreurTest",corps:t,texteBoutonPrimaire:obtenirTexteEdite("boutonCommunFermer")},afficherMessageErreur(i)}function repositionnerEcranCommeAvantAffichageModal(){var n=document.body.style.top;document.body.style.position="";document.body.style.top="";window.scrollTo(0,parseInt(n||"0")*-1)}function fermerSession(){afficherMessageConfirmationFermerSession().done(function(n){n.primaire&&(window.location.href=definirLienMultilingue("/Authentification/Deconnexion"))})}function afficherMessageConfirmationFermerSession(){var n={type:"avertissement",titre:obtenirTexteEdite("titreGabaritSessionFermeePopUpConfirmation"),corps:"<p>"+obtenirTexteEdite("texteGabaritSessionFermeePopUpConfirmation")+"<\/p>",texteBoutonPrimaire:obtenirTexteEdite("boutonGabaritSessionFermeePopUpConfQuitter"),texteBoutonSecondaire:obtenirTexteEdite("boutonGabaritSessionFermeePopUpConfRester")};return afficherMessage(n)}function obtenirTexteEdite(n){var i=Array.prototype.slice.call(arguments,1),t=ECS.textesEdites[n]||n;return t.format.apply(t,i)}function injecterScriptDynamique(n){var t=document.createElement("script");t.src=n;document.body.appendChild(t)}function definirLienMultilingue(n){var t=n,i=$("html").attr("lang");return i!="fr"&&(t.startsWith("/")||(t="/"+t),t.toLowerCase().startsWith("/"+i)||(t="/"+i+"/"+t.substring(1))),t}function executerApresChargementBS(n,t){if(t=$.extend({},{delaiVerificationMs:100,nbTentativesMax:20},t),typeof $.fn.popover!="function"){if(ecs.nbVerificationsChargementBS+=1,ecs.nbVerificationsChargementBS>t.nbTentativesMax)return;setTimeout(function(){executerApresChargementBS(n,t)},t.delaiVerificationMs)}else n()}function obtenirElementsFocusables(n){return n.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')}function conserverFocusElement(n){var t=obtenirElementsFocusables(n),i=t[0],r;dernierElementFocusable=t[t.length-1];r=9;n.addEventListener("keydown",function(n){var t=n.key==="Tab"||n.keyCode===r;t&&(n.shiftKey?document.activeElement===i&&$(dernierElementFocusable).is(":visible")&&(dernierElementFocusable.focus(),n.preventDefault()):document.activeElement===dernierElementFocusable&&$(i).is(":visible")&&(i.focus(),n.preventDefault()))})}function genererId(){return Date.now().toString(36)+"-"+Math.random().toString(36).substr(2,9)}function remplacerRetourChariot(n){return/\r|\n/.exec(n)&&(n=n.replace(/(?:\r\n|\r|\n)/g," ")),n}function remplacerAccents(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function normaliserApostrophes(n){return n.replace(/[\u2018-\u2019]/g,"'")}function normaliserChaineCaracteres(n){return normaliserApostrophes(remplacerAccents(n).toLowerCase())}function supprimerCaracteresSpeciaux(n){return n.normalize("NFD").replace(/[^\w\s]/gi,"")}function gestionGoogleAnalytics(n){(function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create",n,"auto");ga("set","anonymizeIp",!0);ga("send","pageview");$(document).on("click",'a[href], button, input[type=button], input[type=submit], th[class^="sorting"], #flecheHaut',function(){var n=$(this);gestionGoogleAnalyticSpecifique(n)})}function gestionGoogleAnalyticSpecifique(n){var t=determinerCategorieEvenement(n),i=determinerActionEvenement(n),r=determinerLibelleEvenement(n);ga("send","event",t,i,r)}function determinerCategorieEvenement(n){return n.data("ga-categorie")||document.title}function determinerActionEvenement(n){var t=n.data("ga-action"),i;return t||(n.parents(".piv-entete").length?t="Menu PIV Haut":n.parents(".conteneur-menu-identification").length?t="Menu Identification":n.parents(".piv-bas-page").length?t="Menu PIV Bas":(i=$("*").slice(0,$("*").index(n)).filter(":header:not([data-valmsg-summary] h2):last"),t=obtenirTexte(i))),t}function determinerLibelleEvenement(n){var t=n.data("ga-libelle")||obtenirTexte(n)||"";return t.length===0&&(t=n.find("img").attr("alt")||n.attr("value")||""),n.is('.contenu-extensible [data-toggle="collapse"]')&&(t=n.is(".collapsed")?n.find(".developper .sr-only").text():n.find(".reduire .sr-only").text()),n.is('#faq [data-toggle="collapse"]')&&(t=n.is(".collapsed")?t+" ouvert":t+" fermer"),t.replace(obtenirTexteEdite("txtcacheCommunOuvertureLienNouvelOnglet"),"")}function obtenirTexte(n){return n.text().replace(/(\r\n|\n|\r)/gm,"").replace(/\s+/g," ").trim()}var ecs=ecs||{};ecs.dataTables=ecs.dataTables||{};ecs.dataTables.defaut=ecs.dataTables.defaut||{};ecs.hauteurMinimaleSroll=555;ecs.dataTables.defaut.scrollY="400px";ecs.nbVerificationsChargementBS=0;definirTrappeErreurGlboale();$(document).ready(function(){ajouterRetourHautPage();ajusterAccessibiliteLiens();$(".espaceur-conteneurs:visible:last").addClass("dernier-visible");setTimeout(function(){definirHauteurAutomatiqueIFrame()},100)});String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})});